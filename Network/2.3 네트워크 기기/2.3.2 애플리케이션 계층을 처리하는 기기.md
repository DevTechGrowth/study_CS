### 스위치
- 여러 장비를 연결하고 데이터 통신을 중재
- 목적지가 연결된 포트로만 전기 신호를 보냄
- 데이터를 전송하는 통신 네트워크 장비


## L7 스위치
- 로드밸런서
- 서버 부하를 분산하는 기기
- 역할 : 클라이언트로부터 오는 요청들을 여러 서버로 나눔
- 목표 : 시스템이 처리할 수 있는 트래픽 증가

- URL, 서버, 캐시, 쿠키들을 기반으로 트래픽 분산
- 바이러스, 불필요한 외부 데이터 등을 걸러내는 필터링 기능 보유
- 응용 프로그램 수준의 트래픽 모니터링 가능
- 트래픽 분산 제외 대상(ex. 장애 발생 서버) 탐색을 위해 헬스체크 이용

### L4 스위치 vs L7 스위치
- L4 : 로드밸런서

||L7|L4|
|--|--|--|
|처리 계층|애플리케이션|인터넷|
|사용 가능 서비스||스트리밍 관련 서비스에서는 사용 불가|
|트래픽 분산의 기반|IP, 포트, URL, HTTP 헤더, 쿠티 등을 기반|IP와 포트를 기반으로 트래픽 분산.<br/>메시지 기반 인식 불가.|
|in 클라우드 서비스|ALB 컴포턴트(Application Load Balancer)|NLB(Network Load Balancer)|

### 헬스 체크
- 전송 주기와 재전송 횟수 등을 설정한 후, **반복적으로 서버에 요청**을 보내는 것
  - 서버에 부하가 발생하지 않도록 적절한 요청 횟수 필요
  - TCP, HTTP 등 다양한 방법으로 요청을 보냄
    - ex) TCP 요청 => 3-way handshake 발생 X => 비정상
- L4스위치나 L7 스위치가 헬스 체크 사용(정상 서버, 비정상 서버 판별)

### 로드밸러서를 이용한 서버 이중화
**서버 이중화**
- 로드밸런서의 대표 기능
  - 2대 이상의 서버를 기반으로 가상 IP를 제공, 안정적인 서비스 제공
- 서비스 안정적 운용을 위해 서버를 2대 이상 운용
- 서버A가 에러발생시 종료, 서버B는 운용


