### 인터넷 프로토콜 스위트 internet protocol suite
- 인터넷에서 컴퓨터들이 서로 **정보**를 주고 받는 데 쓰이는 **프로토콜 집합**
- 모델 종류
  - **TCP/IP 4계층 모델**
  - **OSI 7계층 모델**
  
![download](https://github.com/DevTechGrowth/study_CS/assets/66158433/20803931-bffc-4d9d-9390-daf3d48b5b3b)

(※ 책에서는 TCP/IP의 Network Interface 계층을 링크 계층으로 표현)

# TCP/IP 계층
- **네트워크**에서 사용되는 **통신 프로토콜의 집합**
- 프로토콜의 **네트워킹 범위에 따라** 네 개의 추상화 계층으로 구성
- 특정 계층을 변경해도 다른 계층에 영향을 주지 않도록 설계 (▷ 유연하게 설계)

## 1. 애플리케이션 계층 application
- 응용 프로그램(FTP, HTTP, SSH, SMTP, DNS 등)이 사용되는 프로토콜
  - 실질적으로 사람들에게 서비스를 제공하는 층
  - 웹 서비스, 이메일 등

## 2. 전송 계층 transport
- 송신자와 수신자를 연결하는 통신 서비스를 제공
- 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어 제공
- 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때 중계

|특징|TCP|UDP|
|--|--|--|
|**신뢰성**|O</br>[3-way handshake](#tcp-연결-성립-과정)</br>(연결지향 프로토콜)|X|
|**패킷 사이의 순서 보장**|O|X|
|**수신 여부 확인**|O|X|
|**패킷 교환 방식**|가상회선 패킷 교환 방식|데이터그램 패킷 교환 방식|

### 가상회선 패킷 교환 방식
- 각 패킷에는 가상 회선 식별자가 포함됨
- 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 순서대로 도착

### 데이터그램 패킷 교환 방식
- 패킷이 독립적으로 이동하며 최적의 경로를 선택
- 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있고, 도착 순서가 다를 수 있는 방식

### TCP 연결 성립 & 전송 & 해제 과정
![img1 daumcdn](https://github.com/DevTechGrowth/study_CS/assets/66158433/232345f3-837b-4850-8574-feda15888bc1)

### - TCP 연결 성립 과정 : 3-way handshake
3-way handshake → TCP 신뢰 확보 → 데이터 전송

|단계|From|To|전송하는 것|비고|
|--|--|--|--|--|
|1단계(SYN)|클라이언트|서버|SYN+클라이언트의 [ISN](https://github.com/DevTechGrowth/study_CS/blob/main/Network/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%20%EC%9A%A9%EC%96%B4%20%EC%A0%95%EB%A6%AC.md#isn)||
|2단계(SYN+ACK)|서버</br>(1단계의 SYN 수신)|클라이언트|서버의 ISN</br>승인번호(=클라이언트의 ISN+1)||
|3단계(ACK)|클라이언트|서버|승인번호(=서버의 ISN+1)||


### - TCP 연결 해제 과정 : 4-way handshake
|단계|상황|From|To|전송하는 것|결과|
|--|--|--|--|--|--|
|1단계(FIN)|클라이언트가 연결을 끊을 때|클라이언트|서버|FIN 세그먼트|클라이언트: FIN_WAIT_1 상태|
|2단계(ACK)||서버|클라이언트|ACK 승인 세그먼트|서버: CLOSE_WAIT 상태</br>클라이언트: ACK 수신 후 FIN_WAIT_2 상태|
|3단계(FIN)|2단계 후 일정 시간 경과 후|서버|클라이언트|FIN 세그먼트||
|4단계(ACK)|클라이언트: TIME_WAIT 상태|클라이언트|서버|ACK 세그먼트|서버: CLOSED 상태</br>클라이언트: 일정 시간 대기 후 닫힘|

**※ 클라이언트가 TIME_WAIT하는 이유**
- 지연 패킷 발생 경우 대비 : 뒤늦게 도착한 패킷 처리를 위해(데이터 무결성 예방)
- 두 장치가 연결이 닫혔는지 확인하기 위해 : 서버가 LAST_ACK 상태에서 닫히면 다시 새롭게 연결할 때 접속 오류 발


## 3. 인터넷 계층
- 장치로부터 받은 네트워크 패킷을 목적지(IP 주소)로 전송하는데 사용되는 계층
- 패킷을 수신해야할 상대 주소를 지정하여 데이터를 전달
- 특징 : 비연결형적(수신 여부 확인 X)
- ex) IP, ARP, ICMP 등

## 4. 링크 계층
- 네트워크 접근 계층
- 실질적으로 데이터를 전달. 장치 간에 신호를 주고 받는 규칙을 정하는 계층
- ex) 전선, 광섬유, 무선 등
- 종류
  - 물리 계층 : 무선 LAN, 유선 LAN을 통해 0과 1로 이루어진 데이터를 보내는 계층
  - 데이터 링크 계층 : 이더넷 프레임을 통해 에러 확인, 흐름 제어, 접근 제어를 담당하는 계층

### 유선 LAN(IEEE802.3)
- 전이중화 통신
- CSMA/CD


### 유선 LAN을 이루는 케이블
- 트위스트 페어 케이블
- 광섬유 케이블


### 무선 LAN(IEEE802.11)
- 반이중화 통신
- CSMA/CA
  
### 무선 LAN을 이루는 주파수
- 와이파이
- BSS
- ESS

### 이더넷 프레임

## 계층 간 데이터 송수신 과정
### 캡슐화 과정
### 비캡슐화 과정


-----
### 참고자료
TCP 연결과 해제 사진 : [브런치-@dreaminz-5. TCP 연결과 해제](https://brunch.co.kr/@dreaminz/5)
